#!/usr/bin/env bash
set -euo pipefail

manifest="${1:-${DOTFILES_DIR:-$HOME/.dotfiles}/uv-tools.txt}"

if [[ ! -f "$manifest" ]]; then
  printf "uv tools manifest not found: %s\n" "$manifest" >&2
  exit 1
fi

while IFS= read -r line || [[ -n "$line" ]]; do
  line="${line%%#*}"
  line="${line#"${line%%[![:space:]]*}"}"
  line="${line%"${line##*[![:space:]]}"}"
  [[ -z "$line" ]] && continue

  printf "Installing uv tool: %s\n" "$line"
  uv tool install "$line"
done <"$manifest"

printf "Installed uv tools from %s\n" "$manifest"
